all: package


# =============================================================================
# Requirements
# =============================================================================
requirements:
	@echo "Installing requirements..."
	pip install -r requirements.txt

# =============================================================================
# Clean
# =============================================================================
clean:
	@echo "Cleaning..."
	rm -rf build dist *.egg-info

# =============================================================================
# Package
# =============================================================================
package: clean requirements
	@echo "Packaging..."
	python -m build

# =============================================================================
# Install
# =============================================================================
install: package
	@echo "Installing..."
	pip install .

# =============================================================================
# Test
# =============================================================================
test:
	@echo "Testing..."
	pytest

# =============================================================================
# Run
# =============================================================================
run:
	@echo "Running..."
	python ./src/index_client/cli.py $(filter-out $@,$(MAKECMDGOALS))


# =============================================================================
# Run
# =============================================================================
run-index-server:
	@echo "Running Index Server..."
	docker compose up

.PHONY: all package install test run clean requirements run-index-server

# Prevent make from interpreting the arguments as make targets
%:
	@: