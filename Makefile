all: package

# =============================================================================
# Clean
# =============================================================================
clean:
	@echo "Cleaning..."
	rm -rf build dist *.egg-info

# =============================================================================
# Package
# =============================================================================
package: clean
	@echo "Packaging..."
	python -m build

# =============================================================================
# Install
# =============================================================================
install: package
	@echo "Installing..."
	pip install .

# =============================================================================
# Test
# =============================================================================
test:
	@echo "Testing..."
	pytest

# =============================================================================
# Run
# =============================================================================
run:
	@echo "Running..."
	python ./src/index_client/cli.py $(filter-out $@,$(MAKECMDGOALS))

.PHONY: all package install test run clean

# Prevent make from interpreting the arguments as make targets
%:
	@: